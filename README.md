# PyQGISmultipleshapefile
Generating multiple shapefiles out a single one with Python + QGIS

#Loading the libraries in QGIS

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from qgis.core import *
from qgis.gui import *
import processing
import sys

#calling the shapefile
MUNICIPIOS = "data\MUNICIPIOS_20170801.shp"

#adding the layer
iface.addVectorLayer(MUNICIPIOS, "MUNICIPIOS", "ogr")

#creating a CRS (coordinate referenced system)

GEO_SIRGAS = "data/GEO_SIRGAS.shp"
processing.runalg("qgis:reprojectlayer", MUNICIPIOS, "epsg:4674", GEO_SIRGAS)

#set the name of the shapefile you will create (based on names on the attribute table)

cities = ["ABAIARA","ACARAPE","ACARAU","ACOPIARA","AIUABA","ALCANTARAS","ALTANEIRA","ALTO SANTO","AMONTADA","ANTONINA DO NORTE","APUIARES","AQUIRAZ","ARACATI","ARACOIABA","ARARENDA","ARARIPE","ARATUBA","ARNEIROZ","ASSARE","AURORA","BAIXIO","BANABUIU","BARBALHA","BARREIRA","BARRO","BARROQUINHA","BATURITE","BEBERIBE","BELA CRUZ","BOA VIAGEM","BREJO SANTO","CAMOCIM","CAMPOS SALES","CANINDE","CAPISTRANO","CARIDADE","CARIRE","CARIRIACU","CARIUS","CARNAUBAL","CASCAVEL","CATARINA","CATUNDA","CAUCAIA","CEDRO","CHAVAL","CHORO","COREAU","CHOROZINHO","CRATEUS","CRATO","CROATA","CRUZ","DEPUTADO IRAPUAN PINHEIRO","ERERE","EUSEBIO","FARIAS BRITO","FORQUILHA","FORTIM","FRECHEIRINHA","GENERAL SAMPAIO","GRACA","GRANJA","GRANJEIRO","GROAIRAS","GUARACIABA DO NORTE","GUAIUBA","GUARAMIRANGA","HIDROLANDIA","HORIZONTE","IBARETAMA","IBIAPINA","IBICUITINGA","ICAPUI","ICO","IGUATU","INDEPENDENCIA","IPAPORANGA","IPAUMIRIM","IPU","IPUEIRAS","IRACEMA","IRAUCUBA","ITAICABA","ITAITINGA","ITAPAJE","ITAPIPOCA","ITAPIUNA","ITAREMA","ITATIRA","FORTALEZA","JAGUARETAMA","JAGUARIBARA","JAGUARIBE","JAGUARUANA","JARDIM","JATI","JIJOCA DE JERICOACOARA","JUAZEIRO DO NORTE","JUCAS","LAVRAS DA MANGABEIRA","LIMOEIRO DO NORTE","MADALENA","MARACANAU","MARANGUAPE","MARCO","MARTINOPOLE","MASSAPE","MAURITI","MERUOCA","MILAGRES","MILHA","MIRAIMA","MISSAO VELHA","MOMBACA","MORADA NOVA","MORAUJO","MORRINHOS","MONSENHOR TABOSA","MUCAMBO","MULUNGU","NOVA OLINDA","NOVA RUSSAS","NOVO ORIENTE","OCARA","OROS","PACAJUS","PACATUBA","PACOTI","PACUJA","PALHANO","PALMACIA","PARACURU","PARAIPABA","PARAMBU","PARAMOTI","PEDRA BRANCA","PENAFORTE","PENTECOSTE","PEREIRO","PINDORETAMA","PIQUET CARNEIRO","PIRES FERREIRA","PORTEIRAS","POTENGI","PORANGA","POTIRETAMA","QUITERIANOPOLIS","QUIXADA","QUIXELO","QUIXERAMOBIM","QUIXERE","REDENCAO","RERIUTABA","RUSSAS","SABOEIRO","SALITRE","SANTA QUITERIA","SANTANA DO ACARAU","SANTANA DO CARIRI","SAO BENEDITO","SAO GONCALO DO AMARANTE","SAO JOAO DO JAGUARIBE","SAO LUIS DO CURU","SENADOR POMPEU","SENADOR SA","SOBRAL","SOLONOPOLE","TABULEIRO DO NORTE","TAMBORIL","TARRAFAS","TAUA","TEJUCUOCA","TIANGUA","TRAIRI","TURURU","UBAJARA","UMARI","UMIRIM","URUBURETAMA","URUOCA","VARJOTA","VARZEA ALEGRE","VICOSA DO CEARA"]

#generating multiple shapefiles based on the extractionbyattribute

for n in cities:
  limite = "C:\Users\eulimar.tiburcio\Desktop\Plugin QGIS/lim" + n +".shp"
  processing.runalg('qgis:extractbyattribute', MUNICIPIOS, "NM_MUNICIP", 0, n, limite)
  iface.addVectorLayer(limite, "limite de " + n , "ogr")
